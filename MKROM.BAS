100 CLEAR 300,&H8EFF:DEFINT A-Z
110 GOSUB 450
120 '-- BIOS ROM
130 AH=0:AL=0:SL=PEEK(&HFCC1)
140 FL$="BIOS.ROM"
150 GOSUB 260
160 '-- BASIC ROM
170 AH=&H40:AL=0:SL=PEEK(&HFCC1)
180 FL$="BASIC.ROM"
190 GOSUB 260
200 '-- SUB ROM
210 IF PEEK(&HFAF8)=0 GOTO 250
220 AH=0:AL=0:SL=PEEK(&HFAF8)
230 FL$="SUBROM.ROM"
240 GOSUB 260
250 END
260 CLS:PRINT "Create ";FL$
270 OPEN FL$ AS #1 LEN=16
280 FIELD #1,16 AS BF$
290 R=1
300 POKE &H8F01,AL
310 POKE &H8F02,AH
320 POKE &H8F0C,SL
330 A=USR(0):GOSUB 380
340 POKE &H8F02,AH+&H20
350 A=USR(0):GOSUB 380
360 CLOSE
370 RETURN
380 FOR AD=&H9000 TO &HAFFF STEP 16
390 D$="":FORI=0TO15:D$=D$+CHR$(PEEK(AD+I)):NEXT
400  LSET BF$=D$
410  LOCATE 0,2:PRINT RIGHT$("00"+HEX$(R-1),3);"0";
420  PUT #1,R:R=R+1
430 NEXT
440 RETURN
450 FOR AD=&H8F00 TO &H8F1A
460  READ D$
470  POKE AD,VAL("&h"+D$)
480 NEXT
490 DEF USR=&H8F00
500 RETURN
510 DATA 21,00,00,11,00,90,01,00
520 DATA 40,c5,d5,3e,00,cd,0c,00
530 DATA d1,c1,12,23,13,0b,78,b1
540 DATA 20,ef,c9
